# 「虚空系统」开发策划案
（小说金手指风格的个人成长辅助+AI赋能系统）

---

## 📋 目录

- [一、项目概述](#一项目概述)
- [二、当前实现状态](#二当前实现状态)
- [三、项目结构](#三项目结构)
- [四、技术方案](#四技术方案)
- [五、核心功能模块](#五核心功能模块)
- [六、目标架构设计](#六目标架构设计)
- [七、扩展空间与接口预留](#七扩展空间与接口预留)
- [八、技术演进路线](#八技术演进路线)
- [九、开发计划](#九开发计划)
- [十、风险与应对](#十风险与应对)

---

# 「虚空系统」开发策划案  
（小说金手指风格的个人成长辅助+AI赋能系统）  


## 一、项目概述  

### 1. 项目背景  
现实生活中，人们常面临"目标感缺失、成长路径不清晰、缺乏持续动力"等问题。融合小说中金手指系统的"任务-属性-奖励"核心逻辑，结合现代AI技术能力，打造一款沉浸式个人成长辅助系统，通过"自定义任务→完成获得属性提升→系统币兑换资源"的闭环，让个人成长过程更具游戏感、成就感和高效性。  

### 2. 核心定位  
**"个人成长金手指系统"**：以小说中系统流的游戏化元素（属性、任务、系统币、资源兑换）为核心框架，以强大的AI辅助能力为技术支撑，营造"获得神秘系统辅助"的沉浸感，核心是让用户在个人成长道路上"目标明确、动力持久、成长可见"。  

### 3. 目标用户  
面向所有追求自我提升的人群，包括学生、职场人士、终身学习者等，支持自定义成长方向（如学习提升、技能培养、习惯养成、职业发展等），打造真正个性化的成长系统。

---

## 二、当前实现状态

### ✅ 已完成功能

#### 后端（void-system-backend）
- ✅ **用户系统**：注册/登录（JWT认证）、密码加密（bcrypt）、用户信息管理
- ✅ **属性系统**：自定义属性创建、属性值更新、属性查询
- ✅ **任务系统**：任务CRUD、任务状态管理（pending/in_progress/completed/failed）、任务完成奖励
- ✅ **经济系统**：系统币记录、商店物品兑换、资源管理
- ✅ **AI服务集成**：
  - ✅ 系统精灵对话（persona_chain）：多轮对话、会话历史管理
  - ✅ 知识库问答（qa_chain）：基于ChromaDB的RAG检索
  - ✅ 任务建议生成（advisor_chain）：结构化任务建议输出
- ✅ **数据库**：SQLite数据库、完整的表结构和索引优化
- ✅ **API文档**：FastAPI自动生成的Swagger文档

#### 前端（void-system-frontend）
- ✅ **页面实现**：
  - ✅ 登录/注册页面
  - ✅ 系统主页（Home.vue）：属性展示、任务管理、商店兑换
  - ✅ AI控制台（AIConsole.vue）：系统精灵对话界面
  - ✅ 任务建议（Advisor.vue）：AI生成任务建议
  - ✅ 知识库问答（QA.vue）：RAG问答界面
  - ✅ 系统设置（Settings.vue）：用户信息、属性管理
- ✅ **路由系统**：Vue Router配置、路由守卫、认证拦截
- ✅ **API集成**：Axios封装、统一错误处理、Token管理
- ✅ **UI组件**：Element Plus集成、响应式布局、导航组件

### 📊 代码质量
- ✅ 完整的类型注解（Python type hints）
- ✅ 函数文档字符串（docstrings）
- ✅ JSDoc注释（前端）
- ✅ 统一的代码风格
- ✅ 错误处理机制

---

## 三、项目结构

### 前端结构（void-system-frontend/）
```
void-system-frontend/
├── src/
│   ├── api/                    # API 接口层
│   │   ├── index.js           # Axios 实例配置（baseURL、拦截器）
│   │   ├── user.js            # 用户认证 API（登录、注册、登出、个人信息）
│   │   └── ai.js              # AI 服务 API（persona、advisor、qa）
│   ├── components/             # 公共组件
│   │   └── NavItem.vue        # 导航项组件（可复用）
│   ├── pages/                  # 页面组件
│   │   ├── Home.vue           # 系统主页（属性面板+任务列表+商店）
│   │   ├── Login.vue          # 登录页面
│   │   ├── Register.vue       # 注册页面
│   │   ├── AIConsole.vue      # AI 控制台（系统精灵多轮对话）
│   │   ├── Advisor.vue        # 任务建议生成页面
│   │   ├── QA.vue             # 知识库问答页面
│   │   └── Settings.vue       # 系统设置（用户信息、属性管理）
│   ├── router/
│   │   └── index.js           # Vue Router 配置（路由守卫、懒加载）
│   ├── App.vue                # 主应用组件（布局、导航、认证状态）
│   ├── main.js                # 应用入口（Vue实例、Element Plus、路由）
│   └── style.css              # 全局样式
├── public/                     # 静态资源
├── vite.config.js              # Vite 构建配置
└── package.json                # 前端依赖配置
```

### 后端结构（void-system-backend/）
```
void-system-backend/
├── main.py                     # FastAPI 主应用
│   ├── 路由定义（用户、任务、属性、商店、AI）
│   ├── JWT 认证中间件
│   ├── Pydantic 数据模型
│   └── LangServe 路由集成
├── database.py                 # 数据库操作模块
│   ├── Database 类（SQLite）
│   ├── 表结构初始化
│   ├── CRUD 操作（用户、属性、任务、系统币、资源）
│   └── 索引优化
├── lc_server/                  # LangChain 服务模块
│   ├── persona_chain.py       # 系统精灵对话链
│   │   └── 多轮对话、会话历史管理
│   ├── qa_chain.py            # 知识问答链（RAG）
│   │   └── ChromaDB 检索、文档嵌入
│   └── advisor_chain.py        # 任务建议生成链
│       └── 结构化任务建议输出
├── chroma_db/                  # ChromaDB 向量数据库目录
│   └── chroma.sqlite3
├── void_system.db              # SQLite 主数据库
├── pyproject.toml              # Python 项目配置（依赖管理）
└── README.md                   # 后端说明文档
```

### 🚀 快速启动

#### 环境要求
- **Python**: >= 3.12
- **Node.js**: >= 16.0
- **Ollama**: 需要本地运行 Ollama 服务（用于 LLM 模型）

#### 后端启动
```bash
cd void-system-backend

# 使用 uv 管理依赖（推荐）
uv sync
uv run uvicorn main:app --reload --host 127.0.0.1 --port 8000

# 或使用传统方式
pip install -r requirements.txt
uvicorn main:app --reload
```

后端服务将在 `http://127.0.0.1:8000` 启动，API 文档访问：`http://127.0.0.1:8000/docs`

#### 前端启动
```bash
cd void-system-frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

前端服务将在 `http://localhost:5173` 启动

#### Git 操作
```bash
# 添加文件
git add .

# 提交更改
git commit -m "提交说明"

# 推送到远程仓库
git push -u origin main
```  


## 二、核心功能模块（初期MVP版）  
### 1. 用户系统  
- **基础功能**：注册/登录（支持学号/邮箱注册，密码加密存储）、个人中心（展示属性面板、任务进度、系统币余额）。  
- **核心价值**：建立用户专属数据空间，记录学习轨迹。  

### 2. 属性系统（核心特色）  
- **自定义属性**：用户可创建个性化属性（如“高数熟练度”“Python编程”“雅思词汇量”），设置初始值（0-100）。  
- **属性成长**：完成关联任务后，通过“手动自评”或“AI建议”获得属性点（如“完成3小时高数刷题，+5熟练度”），属性值实时展示（进度条/数值）。  
- **简化设计**：初期无需复杂算法，属性值仅作为学习成果的可视化象征，不直接影响任务难度（降低开发复杂度）。  

### 3. 任务系统  
- **任务创建**：用户自定义任务名称（如“背50个雅思单词”）、目标描述、关联属性、预计耗时、奖励（系统币数量）。  
- **任务流程**：创建→标记“进行中”→完成后提交（可上传证明，如笔记照片/打卡截图）→获得属性点+系统币。  
- **评估方式**：初期以“用户自评”为主（选择完成度，系统推荐属性点），后期加入AI简易评估（如识别笔记关键词，辅助判断完成质量）。  

### 4. 经济系统（激励闭环）  
- **系统币获取**：完成任务固定奖励（如简单任务5币，复杂任务20币），暂不开放其他获取途径（避免逻辑复杂）。  
- **兑换功能**：  
  - 学习资料：团队预先上传的免费资源（如期末复习提纲、网课链接、电子书），兑换需10-50币；  
  - AI服务次数：兑换“AI答疑”（单次5币）或“专项指导”（如“高数解题思路”，单次10币），每日兑换上限5次。  

### 5. AI赋能系统（核心金手指）  
- **智慧顾问**：调用先进AI接口，支持自然语言提问，提供个性化建议和解决方案，营造“系统精灵”的交流体验。  
- **知识库增强（基于LangChain）**：使用LangChain构建RAG系统，用户可导入个人文档、学习资料，系统智能检索并提供精准回答，打造个人专属智慧库。  
- **云端Agent能力**：支持创建专属AI助手，可进行多轮对话、复杂任务规划和执行，真正实现“系统辅助成长”的金手指体验。  


## 四、技术方案  

### 1. 技术栈选型（性能优先+体验优先）  

| 模块         | 当前技术选择                      | 理由说明                                  |  
|--------------|-----------------------------------|-------------------------------------------|  
| 前端框架     | Vue 3 + Vite                      | 现代化、高性能、开发体验优秀               |  
| UI组件库     | Element Plus                      | 组件丰富、文档友好，适合快速搭建界面       |  
| HTTP客户端   | Axios                             | 功能完善、拦截器支持、错误处理             |  
| 路由管理     | Vue Router                        | 官方路由方案、支持懒加载、路由守卫         |  
| 后端框架     | FastAPI                           | 高性能、自动API文档、类型检查、异步支持    |  
| 数据库       | SQLite（当前）                    | 无需部署、文件型数据库、适合初期开发       |  
| ORM/数据库   | 原生SQLite（当前）                 | 轻量级、直接控制、适合MVP阶段              |  
| AI框架       | LangChain + LangServe             | 专业的LLM应用框架、完整的RAG能力链         |  
| 向量数据库   | ChromaDB                          | 轻量级、易于集成、支持本地部署             |  
| LLM模型      | Ollama（本地）                    | 免费、可离线、支持多种模型                 |  
| 认证方案     | JWT (jose)                        | 无状态、易于扩展、标准化                   |  
| 密码加密     | bcrypt                            | 安全可靠、行业标准                         |  
| 数据验证     | Pydantic                          | 类型安全、自动验证、FastAPI集成            |  
| 部署方式     | 本地开发 → 云服务器部署           | 初期本地测试，后期支持在线访问             |  

### 2. 当前系统架构  

```
┌─────────────────────────────────────────────────────────┐
│                    用户层（前端）                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌────────┐ │
│  │  Home    │  │  AI      │  │ Advisor  │  │  QA    │ │
│  │  Settings│  │ Console  │  │          │  │        │ │
│  └──────────┘  └──────────┘  └──────────┘  └────────┘ │
│         │              │              │              │   │
│         └──────────────┴──────────────┴──────────────┘   │
│                        │                                │
│                   Axios API Client                       │
└────────────────────────┼────────────────────────────────┘
                         │ HTTP/REST
┌────────────────────────┼────────────────────────────────┐
│                    API层（FastAPI）                      │
│  ┌──────────────────────────────────────────────────┐   │
│  │  /api/users  /api/tasks  /api/attributes        │   │
│  │  /api/shop   /api/ai/persona  /api/ai/qa        │   │
│  └──────────────────────────────────────────────────┘   │
│                        │                                │
│                   JWT 认证中间件                        │
└────────────────────────┼────────────────────────────────┘
                         │
┌────────────────────────┼────────────────────────────────┐
│                    服务层                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  用户服务    │  │  任务&属性   │  │  经济服务    │  │
│  │  (注册/登录) │  │  服务        │  │  (系统币)    │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
│                                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │              AI服务层（LangChain）                 │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐        │  │
│  │  │ Persona │  │   QA     │  │ Advisor  │        │  │
│  │  │  Chain  │  │  Chain   │  │  Chain   │        │  │
│  │  └──────────┘  └──────────┘  └──────────┘        │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────────┼────────────────────────────────┘
                         │
┌────────────────────────┼────────────────────────────────┐
│                    数据层                                 │
│  ┌──────────────────┐      ┌──────────────────┐        │
│  │   SQLite DB      │      │   ChromaDB       │        │
│  │  (主数据库)      │      │  (向量数据库)    │        │
│  │                  │      │                  │        │
│  │ - users          │      │ - document       │        │
│  │ - attributes     │      │   embeddings     │        │
│  │ - tasks          │      │                  │        │
│  │ - coins          │      │                  │        │
│  │ - user_resources │      │                  │        │
│  └──────────────────┘      └──────────────────┘        │
└────────────────────────────────────────────────────────┘
```  


## 四、团队分工（4人团队）  
### 成员A：前端开发（2-3周）  
- 负责页面开发：登录页、个人面板（属性+任务展示）、任务创建/编辑页、商店兑换页；  
- 实现前端与后端的API交互（Axios），确保数据实时渲染（如任务完成后属性值即时更新）；  
- 优化UI：参考“游戏系统面板”设计，突出属性成长的视觉反馈（如进度条变色、数值跳动）。  

### 成员B：后端开发（2-3周）  
- 设计数据库表结构（用户表、属性表、任务表、知识库表、系统币记录表）；  
- 开发核心API：用户注册/登录（密码哈希存储）、任务CRUD、属性值更新、系统币兑换逻辑；  
- 对接数据库（SQLAlchemy），确保数据增删改查稳定，编写接口文档（供前端调用）。  

### 成员C：AI与知识库模块（3-4周）  
- 对接AI接口：申请豆包API，编写调用函数（接收前端问题→返回AI回答），实现“次数限制”（兑换后扣减次数）；  
- 搭建简易RAG：手动录入首批知识库（如50条高数基础题、50条英语语法点），用Python关键词匹配实现检索；  
- 辅助属性评估：编写简单逻辑（如“任务耗时1小时以上，推荐属性点+3~5”），供用户参考。  

### 成员D：产品设计与测试（全程）  
- 输出产品原型（Figma线框图），明确页面流程（如“创建任务→完成→领奖励→兑换AI”）；  
- 协调前后端开发，确认接口逻辑（如任务完成后如何触发属性和币的更新）；  
- 负责测试：验证全流程通顺性（如注册后能否创建属性、兑换AI能否正常调用），收集BUG并推动修复；  
- 准备初期资源：整理可兑换的学习资料（如团队专业课笔记、公开网课链接），录入系统。  


## 五、开发计划（6-8周）  
| 阶段       | 时间   | 核心任务                          | 交付物                          |  
|------------|--------|-----------------------------------|---------------------------------|  
| 第1周      | 需求确认 | 细化功能点，输出原型和数据库设计  | 产品原型、数据库表结构文档      |  
| 第2-4周    | 并行开发 | 前端页面开发、后端API开发、AI模块开发 | 可运行的前端页面、后端接口、AI调用功能 |  
| 第5周      | 集成对接 | 前后端联调，打通数据流程          | 全流程可跑通的系统（本地版）    |  
| 第6-7周    | 测试优化 | 功能测试+BUG修复，优化UI体验      | 稳定的初期版本                  |  
| 第8周      | 内部试用 | 团队成员模拟用户使用，收集改进建议 | 试用报告+下一版迭代计划          |  


## 六、开发优先级策略  
1. **核心系统闭环**：优先实现属性-任务-奖励的基础逻辑，确保系统核心体验；  
2. **LangChain集成**：直接使用LangChain框架实现RAG，确保AI能力的专业性；  
3. **系统币经济**：建立基础的获取和消耗机制，为后续扩展预留空间；  
4. **AI功能**：支持多轮对话，提供更沉浸的“系统精灵”交互体验。  


## 七、风险与应对  
| 风险点               | 应对措施                                  |  
|----------------------|-------------------------------------------|  
| 技术难点（如RAG效果差） | 初期用关键词检索保底，后期引入LangChain优化 |  
| 数据量不足（属性评估不准） | 依赖用户自评，积累数据后再训练简单规则模型  |  
| 开发进度滞后          | 优先保证核心闭环（任务→属性→币），砍掉非必要功能 |  


## 八、预期成果  
1. 可运行的初期版本：实现“属性自定义→任务管理→奖励兑换→AI赋能”全流程，打造小说金手指般的成长体验；  
2. 技术能力构建：掌握LangChain框架应用、前后端开发、数据库设计等核心技能；  
3. 产品体验验证：通过内部试用，验证“系统流游戏化+AI赋能”模式对个人成长的实际促进效果。  


**核心原则**：打造有沉浸感的“系统金手指”体验，同时确保实际功能的实用性，让系统真正成为用户成长道路上的得力助手。